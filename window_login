import tkinter as tk
from tkinter import messagebox
import account
import sqlite3

def login_screen():
    account.init_db()
    root = tk.Tk()
    root.title("Login")
    root.geometry("400x250")

    tk.Label(root, text="Username").pack(pady=10)
    username = tk.Entry(root)
    username.pack()

    tk.Label(root, text="Password").pack(pady=10)
    password = tk.Entry(root, show="*")
    password.pack()

    def login():
        name = username.get().strip()
        pwd = password.get().strip()

        if not name or not pwd:
            messagebox.showwarning("Error", "Please fill all fields")
            return

        if account.check_user(name, pwd):
            messagebox.showinfo("Success", f"Welcome {name}!")
            root.destroy()
            import window_database
            window_database.main()
            
        else:
            messagebox.showerror("Error", "Incorrect username or password")

    tk.Button(root, text="Login", command=login).pack(pady=20)
    tk.Button(root, text="Sign Up", command=lambda:[root.destroy(), __import__('signup').signup()]).pack()

    root.mainloop()

if __name__ == "__main__":
    login_screen()
 
